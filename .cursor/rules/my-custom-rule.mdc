---
description: 
globs: 
alwaysApply: true
---

La primera regla es no hacer cambios a una funcionalidad existente sin antes consultarlo conmigo y confirmar que yo estoy de acuerdo con dicho cambio. 


1. **Mantener la arquitectura modular** en `src/`:

   * `src/routes/` para definir rutas por mÃ³dulo
   * `src/controllers/` para la lÃ³gica de negocio
   * `src/db/` solo para conexiÃ³n a PostgreSQL
   * `src/docs/` exclusivamente para archivos `.swagger.js`

2. Cada archivo Swagger debe documentar solo un mÃ³dulo:

   * `productos.swagger.js`
   * `ventas.swagger.js`
   * `reportes.swagger.js`

---

### ğŸ§  Buenas prÃ¡cticas de desarrollo

3. Siempre que crees una nueva ruta:

   * Define primero el **controlador**
   * Luego el **archivo de ruta**
   * Luego su documentaciÃ³n Swagger

4. Usa `async/await` en todos los controladores

   * Manejando errores con `try/catch`
   * Siempre responder con `res.status(...).json(...)`

5. Evita duplicar lÃ³gica de SQL en controladores.

   * Si usas la misma consulta en varios endpoints, considera moverla a un helper

---

### ğŸ” Seguridad y entorno

6. No subir `.env` ni credenciales sensibles

   * Usa `.env.example` para compartir estructura de configuraciÃ³n

7. Usa `process.env` en todos los archivos que accedan a configuraciones

---

### ğŸ§ª Control de versiones y commits

8. Usa mensajes de commit claros y con emojis cuando aplique. Ejemplos:

   * `âœ¨ Agregar endpoint PUT /productos/:id`
   * `ğŸ› Corregir error en stock negativo`
   * `ğŸ“ Documentar GET /ventas en Swagger`

9. Cada cambio mayor (nueva ruta, endpoint o lÃ³gica de negocio) debe ir en **un solo commit** bien descrito

---

### ğŸ“˜ Swagger / DocumentaciÃ³n

10. Documentar cada nuevo endpoint **antes o justo despuÃ©s** de implementarlo
11. Mantener etiquetas Swagger (`tags`) consistentes:

* Productos â†’ `[Productos]`
* Ventas â†’ `[Ventas]`
* Reportes â†’ `[Reportes]`

---

### ğŸš€ Extras para producciÃ³n (futuro)

12. Preparar un archivo `start.sh` o `ecosystem.config.js` para despliegue automÃ¡tico
13. Si conectas a Vercel/Railway/Raspberry: documentar los pasos en `DEPLOY.md`

---

